<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contact</title>
  <link rel="stylesheet" href="base.css">
  <link rel="stylesheet" href="product.css">
  <link rel="stylesheet" href="style.css"> 
  <script type="module" src="cart-utils.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
  <script src="data.js"></script>
  <script type="module" src="script.js" defer></script>
</head>
<body class="sticky-footer" >
  <div class="page-wrapper">
    <!-- ========== NAVBAR ========== -->
    <header class="navbar">
      <div class="nav-left">
        <a href="index.html" class="logo">
          <img src="DEADSTOCK (3).png" alt="DeadstockBlvd Logo" class="logo-img" />
        </a>
        <div class="nav-wrapper" id="navWrapper">
          <nav id="navbar">
            <img id="close" src="Close (1).png" alt="Close Menu" class="close-icon" />
            <a href="index.html">Home</a>
            <a href="shop.html">Shop</a>
            <a href="Contact.html" class="active">Contact</a>
          </nav>
        </div>
        <img id="bar" src="Hamburger.png" alt="Menu" class="hamburger-icon" />
      </div>
      <div class="nav-right">
        <button id="searchIcon" class="icon-button">
          <img src="SearchIcon.png" alt="Search" class="search-icon" />
        </button>
        <button id="cartIcon" class="cart-wrapper icon-button">
          <img src="CartIcon.png" alt="Cart" class="cart-icon" />
          <span id="cart-count">0</span>
        </button>
      </div>
    </header>

    <div id="preloader">
      <div class="loader">Loading...</div>
    </div>
    
    <!-- ✅ Search Bar Container (works for all screen sizes) -->
    <div id="searchBarContainer">
      <!-- 🔍 Input field with clear button -->
      <div class="search-input-wrapper">
        <input
          type="text"
          id="searchInput"
          placeholder="Search products..."
          autocomplete="off"/>
        <button id="clearSearch" aria-label="Clear Search">&times;</button>
      </div>
      
      <!-- ✅ Scrollable area for suggestions + results -->
      <div id="searchScrollableArea">
        <!-- 🔽 Suggestions (autocomplete-style) -->
        <ul id="searchSuggestions" class="search-suggestions"></ul>
        
        <!-- 🔍 Search Results -->
        <div id="searchResultsWrapper">
          <p id="noResultsMessage" style="display: none;">No products found.</p>
          <div id="searchResults">
          </div>
        </div>
      </div>
    </div>
    
    <!-- ✅ Optional: Dimmed overlay (used when input is active) -->
    <div id="searchOverlay"></div>
    
    <!-- ========== MAIN CONTACT CONTENT (placeholder) ========== -->
    <main style="padding: 40px; text-align: center;">
      <h1>Contact Us</h1>
      
      <div id="formSuccessMessage" style="display: none;">
        
        <span style="color: green; font-weight: bold;">
          ✅ Thanks for contacting us. We'll get back to you as soon as possible.
        </span>
      </div>
      <!-- Add your contact form or info here -->
      <section id="contact-form-section" class="section-p1">
        <form 
          id="contactForm" 
          class="contact-form" 
          action="https://formspree.io/f/xblkjged" 
          method="POST">
          <div class="form-row">
            <div class="form-group">
              <label for="name"><span></span></label>
              <input type="text" id="name" name="name" placeholder="Name" required />
            </div>
            
            <div class="form-group">
              <label for="email"><span></span></label>
              <input type="email" id="email" name="email" placeholder="Email" required />
            </div>
          </div>
          
          <div class="form-group full-width">
            <label for="message"><span></span></label>
            <textarea id="message" name="message" rows="6" placeholder="Your Message" required></textarea>
          </div>
          
          <button type="submit" class="btn-submit">Send Message</button>
        </form>
      </section>
      
    </main>
    
    <footer class="footer-flex">
      <!-- LEFT SIDE: Currency Selector -->
      <div class="footer-left">
        <div class="custom-select-wrapper">
          <label for="currencySelector" class="currency-label">Currency</label>
          <div class="custom-select" id="customSelect">
            <div class="selected-option" id="selectedOption">GBP (£)</div>
            <span class="arrow" id="dropdownArrow">v</span>
            <ul class="options" id="optionsList">
              <li data-value="GBP">GBP (£)</li>
              <li data-value="USD">USD ($)</li>
              <li data-value="EUR">EUR (€)</li>
            </ul>
          </div>
        </div>
      </div>
      
      <!-- RIGHT SIDE: Copy & Links -->
      <div class="footer-right">
        <p class="footer-copy">© 2025 DEADSTOCKBLVD</p>
        <div class="footer-links">
          <a href="#" class="policy-link" data-modal-target="modal-terms">T&Cs</a>
          <a href="#" class="policy-link" data-modal-target="modal-policy">Privacy Policy</a>
          <a href="#" class="policy-link" data-modal-target="modal-service">Terms of Service</a>
          <a href="#" class="policy-link" data-modal-target="modal-refund">Refund Policy</a>
          <a href="/contact.html" class="policy-link">Contact Information</a>
        </div>
      </div>
    </footer>
    
    <!-- ✅ Policy Modal -->
    <div id="modal-policy" class="modal" role="dialog" aria-modal="true" aria-labelledby="policy-title">
      <div class="modal-content">
        <span class="close" role="button" aria-label="Close Modal">&times;</span>
        <h3 id="policy-title">Terms & Conditions</h3>
        <p>Your policy content goes here.</p>
      </div>
    </div>
    
    <!-- ✅ Refund Policy Modal -->
    <div id="modal-refund" class="modal" role="dialog" aria-modal="true" aria-labelledby="refund-title">
      <div class="modal-content">
        <span class="close" role="button" aria-label="Close Modal">&times;</span>
        <h3 id="refund-title">Refund Policy</h3>
        <p>No refunds. All sales are final.</p>
      </div>
    </div>
    
    <!-- ✅ Terms & Conditions Modal -->
    <div id="modal-terms" class="modal" role="dialog" aria-modal="true" aria-labelledby="terms-title">
      <div class="modal-content">
        <span class="close" role="button" aria-label="Close Modal">&times;</span>
        <h3 id="terms-title">Terms & Conditions</h3>
        <p>By using this site, you agree to...</p>
      </div>
    </div>
    
    <!-- ✅ Terms of Service Modal -->
    <div id="modal-service" class="modal" role="dialog" aria-modal="true" aria-labelledby="service-title">
      <div class="modal-content">
        <span class="close" role="button" aria-label="Close Modal">&times;</span>
        <h3 id="service-title">Terms of Service</h3>
        <p>Your Terms of Service content goes here.</p>
      </div>
    </div>
      
      <!-- Mobile Slide-in Cart Drawer -->
    <div id="mobileCartDrawer">
        <div id="mobileCartHeader">
            <h3>Your Cart</h3>
            <button id="closeCartDrawer">&times;</button>
        </div>
        <div id="mobileCartItems"></div>
        <div id="mobileCartFooter">
            <div class="footer-totals">
                <p>Subtotal: <span id="drawerCartSubtotal">0.00</span></p>
            </div>
            <button id="drawerCheckoutBtn" class="checkout-bar">Checkout</button>
        </div>
    </div>
    
    <!-- 🔴 New: Backdrop for closing drawer on outside click -->
    <div id="cartBackdrop" class="cart-backdrop"></div>
    
    <!-- Mobile Slide-in Cart Drawer -->
    <div id="mobileCartDrawer">
        <div id="mobileCartHeader">
            <h3>Your Cart</h3>
            <button id="closeCartDrawer">&times;</button>
        </div>
        <div id="mobileCartItems"></div>
        <div id="mobileCartFooter">
            <div class="footer-totals">
                <p>Subtotal: <span id="drawerCartSubtotal">0.00</span></p>
            </div>
            <button id="drawerCheckoutBtn" class="checkout-bar">Checkout</button>
        </div>
    </div>
    
    <script>
      window.addEventListener("load", () => {
        const preloader = document.getElementById("preloader");
        if (!preloader) return;
        
        // Short delay to make sure images render properly
        setTimeout(() => {
          preloader.style.opacity = "0";
          setTimeout(() => {
            preloader.style.display = "none";
          }, 500); // fade out transition
        }, 300); // only wait 300ms after load
      });
    </script>
        
    <script>
      const form = document.getElementById('contactForm');
      const successBox = document.getElementById('formSuccessMessage');
      
      form.addEventListener('submit', async function (e) {
        e.preventDefault();
        
        const formData = new FormData(form);
        
        try {
          const response = await fetch(form.action, {
            method: 'POST',
            body: formData,
            headers: {
              'Accept': 'application/json'
            }
          });
          
          if (response.ok) {
            // ✅ Show success message with icon
            successBox.innerHTML = `
              <div class="icon">✔</div>
              <div>Thanks for contacting us. We'll get back to you as soon as possible.</div>
            `;
            successBox.style.display = 'flex';
            
            // Fade out after 3 seconds
            setTimeout(() => {
              successBox.classList.add('fade-out');
            }, 3000);
            
            // Optionally hide after fading out
            setTimeout(() => {
              successBox.style.display = 'none';
              successBox.classList.remove('fade-out');
            }, 5000);
            
            form.reset(); // Clear the form
          } else {
            alert("Something went wrong. Please try again.");
          }
        } catch (error) {
          alert("Error sending message.");
        }
      });
    </script>
    
    <script>
      window.addEventListener("load", () => {
        const preloader = document.getElementById("preloader");
        if (!preloader) return;
        
        // Short delay to make sure images render properly
        setTimeout(() => {
          preloader.style.opacity = "0";
          setTimeout(() => {
            preloader.style.display = "none";
          }, 500); // fade out transition
        }, 300); // only wait 300ms after load
      });
    </script>
    
    <script>   //new here//
      const modalTriggers = document.querySelectorAll('[data-modal-target]');
      const modals = document.querySelectorAll('.modal');
      const closeButtons = document.querySelectorAll('.modal .close');
      
      // Open specific modal
      modalTriggers.forEach(trigger => {
        trigger.addEventListener('click', () => {
          const targetId = trigger.getAttribute('data-modal-target');
          const modal = document.getElementById(targetId);
          if (modal) {
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden'; // ✅ Prevent background scroll
          }
        });
      });
      
      // Close modal when clicking X
      closeButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          const modal = btn.closest('.modal');
          modal.style.display = 'none';
          document.body.style.overflow = ''; // ✅ Re-enable background scroll
        });
      });
      
      // Close when clicking outside modal content
      modals.forEach(modal => {
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            modal.style.display = 'none';
            document.body.style.overflow = ''; // ✅ Re-enable background scroll
          }
        });
      });
    </script>
    
    <script>
      // Get all modal triggers (buttons or links)
      const modalTriggers = document.querySelectorAll('[data-modal-target]');
      const modals = document.querySelectorAll('.modal');
      const closeButtons = document.querySelectorAll('.modal .close');
      
      // Open specific modal
      modalTriggers.forEach(trigger => {
        trigger.addEventListener('click', () => {
          const targetId = trigger.getAttribute('data-modal-target');
          const modal = document.getElementById(targetId);
          if (modal) modal.style.display = 'flex';
        });
      });
      
      // Close modal when clicking X
      closeButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          btn.closest('.modal').style.display = 'none';
        });
      });
      
      // Close when clicking outside modal content
      modals.forEach(modal => {
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            modal.style.display = 'none';
          }
        });
      });
    </script>
    
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const addToCartBtn = document.getElementById('addToCartBtn');
        const pfAmount = document.getElementById('pfAmount');
        const pfItemName = document.getElementById('pfItemName');
        
        if (addToCartBtn && pfAmount && pfItemName) {
          // Get product price & name from Add to Cart button data attributes
          const price = addToCartBtn.getAttribute('data-price');
          const name = addToCartBtn.getAttribute('data-name');
          
          // Format price to two decimals (e.g., "35.00")
          const formattedPrice = parseFloat(price).toFixed(2);
          
          // Update PayFast form hidden inputs
          pfAmount.value = formattedPrice;
          pfItemName.value = name;
        }
      });
    </script>
    
    <!-- ✅ Add this at the bottom, before </body> -->
    <script type="module">
      import {
        setCurrency,
        getCurrency,
        formatPrice
      } from './currency.js';
    
      document.addEventListener('DOMContentLoaded', async () => {
        const addToCartBtn = document.getElementById("addToCartBtn");
        const basePriceGBP = parseFloat(addToCartBtn?.dataset.price || 0);
        const priceEl = document.getElementById("convertedPrice");
        const selector = document.getElementById("currencySelector");
        
        async function updatePriceDisplay() {
          priceEl.innerHTML = await formatPrice(basePriceGBP);
        }
        
        selector.value = getCurrency();
        selector.addEventListener('change', async (e) => {
          setCurrency(e.target.value);
          await updatePriceDisplay();
        });
        
        await updatePriceDisplay();
      });
    </script>
    
    <script type="module">
      import { formatPrice, getCurrency, setCurrency } from './currency.js';
          
      document.addEventListener('DOMContentLoaded', async () => {
        const priceEls = document.querySelectorAll('.converted-price');
          
        for (let el of priceEls) {
          const gbp = parseFloat(el.dataset.gbp);
          el.innerText = await formatPrice(gbp);
        }
      });
    </script>
    <!-- ========== SCRIPTS ========== -->
    <script type="module" src="navbar.js"></script>
    <script type="module" src="search.js"></script>
    <script type="module" src="cart.js"></script>
    <script type="module" src="currency.js"></script>
    <script type="module" src="currency-init.js"></script>
  </div>
</body>
</html>
