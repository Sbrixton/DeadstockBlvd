<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEADSTOCKBLVD-Shop</title>
    <link rel="stylesheet" href="base.css">
    <link rel="stylesheet" href="product.css" />
    <link rel="stylesheet" href="style.css">
    <script type="module" src="navbar.js"></script>
    <script type="module" src="currency.js"></script>
    <script type="module" src="currency-init.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
</head>

<body>
    <header class="navbar">
        <div class="nav-left">
            <a href="index.html" class="logo">
                <img src="DEADSTOCK (3).png" alt="DeadstockBlvd Logo" class="logo-img" />
            </a>
            
            <div class="nav-wrapper" id="navWrapper">
                <nav id="navbar">
                    <i id="close" class="fas fa-times"></i>
                    <a href="index.html">Home</a>
                    <a href="shop.html" class="active">Shop</a>
                    <a href="Contact.html">Contact</a>
                </nav>
            </div>
            <img id="bar" src="Hamburger.png" alt="Menu" class="hamburger-icon" />
        </div>
        
        <div class="nav-right">
          <button id="searchIcon" class="icon-button">
            <img src="SearchIcon.png" alt="Search" class="search-icon" />
          </button>
          <button id="cartIcon" class="cart-wrapper icon-button">
            <img src="CartIcon.png" alt="Cart" class="cart-icon" />
            <span id="cart-count">0</span>
          </button>
        </div>
    </header>
    
    <div id="preloader">
        <div class="loader">Loading...</div>
    </div>
    
    <!-- ✅ Search Bar Container (below navbar) -->
    <div id="searchBarContainer">
      <div class="search-input-wrapper">
        <input
          type="text"
          id="searchInput"
          placeholder="Search products..."
          autocomplete="off"
        />
        <button id="clearSearch" aria-label="Clear Search">&times;</button>
      </div>
        
        <!-- ✅ Shared scroll wrapper for both -->
        <div id="searchScrollableArea">
            <ul id="searchSuggestions" class="search-suggestions"></ul>
            
            <div id="searchResultsWrapper">
                <p id="noResultsMessage" style="display: none;">No products found.</p>
                <div id="searchResults"></div>
            </div>
        </div>
    </div>
    
    <!-- ✅ Search overlay now OUTSIDE the container -->
    <div id="searchOverlay"></div>
    <!-- ========== SHOP PRODUCT GRID ========== -->
    <section id="products">
        <h2>Shop All</h2>
        <div class="pro-container shop-grid">
            <!-- Product Card -->
            <div class="pro">
                <a href="product1.html" class="pro-link">
                    <div class="product-img">
                      <img src="Nike SB Dunk Orange Grateful Dead (1).png" alt="Main" class="main-img" />
                      <img src="Nike SB Dunk Orange Grateful Dead (4).png" alt="Hover" class="hover-img" />
                    </div>
                    <div class="des">
                      <h5>Nike SB Dunk</h5>
                      <h4 class="converted-price" data-gbp="86">£86.00</h4>
                    </div>
                </a>
                
                <!-- ✅ New Add-to-Cart Button -->
                <button 
                    class="add-to-cart-btn"
                    data-name="Nike SB Dunk"
                    data-price="86"
                    data-image="Nike SB Dunk Orange Grateful Dead (1).png"
                    data-id="1">
                    <img src="CartIcon.png" alt="Add to cart" class="btn-icon" />
                </button>
            </div>
            
            <!-- Add more .pro blocks as needed -->
            <div class="pro">
                <a href="product2.html" class="pro-link">
                    <div class="product-img">
                        <img src="Nike x CRTZ  (1).png" alt="Main" class="main-img" />
                        <img src="Nike x CRTZ  (3).png" alt="Hover" class="hover-img" />
                    </div>
                    <div class="des">
                        <h5>Nike x Corteiz Air Max 95</h5>
                        <h4 class="converted-price" data-gbp="98">£98.00</h4>
                    </div>
                </a>
                <button 
                    class="add-to-cart-btn"
                    data-name="Nike x Corteiz Air Max 95"
                    data-price="98"
                    data-image="Nike x CRTZ  (3).png"
                    data-id="2">
                    <img src="CartIcon.png" alt="Add to cart" class="btn-icon" />
                </button>
            </div>
            
            <div class="pro">
                <a href="product3.html" class="pro-link">
                    <div class="product-img">
                        <img src="Nike Hoodie (1).png" alt="Main" class="main-img" />
                        <img src="Nike Hoodie (4).png" alt="Hover" class="hover-img" />
                    </div>
                    <div class="des">
                        <h5>Nike Hoodie</h5>
                        <h4 class="converted-price" data-gbp="25">£25.00</h4>
                    </div>
                </a>
                <button 
                    class="add-to-cart-btn"
                    data-name="Nike Hoodie"
                    data-price="25"
                    data-image="Nike Hoodie (1).png"
                    data-id="3">
                    <img src="CartIcon.png" alt="Add to cart" class="btn-icon" />
                </button>
            </div>
            
            <div class="pro">
                <a href="product4.html" class="pro-link">
                    <div class="product-img">
                        <img src="Balenciaga Track Pants (2).png" alt="Main" class="main-img" />
                        <img src="Balenciaga Track Pants (4).png" alt="Hover" class="hover-img" />
                    </div>
                    <div class="des">
                        <h5>Balenciaga Track Pants</h5>
                        <h4 class="converted-price" data-gbp="96">£96.00</h4>
                    </div>
                </a>
                <button 
                    class="add-to-cart-btn"
                    data-name="Balenciage Track Pants"
                    data-price="96"
                    data-image="Balenciaga Track Pants (2).png"
                    data-id="4">
                    <img src="CartIcon.png" alt="Add to cart" class="btn-icon" />
                </button>
            </div>
            
            <div class="pro">
                <a href="product5.html" class="pro-link">
                    <div class="product-img">
                        <img src="Nike Air Max 95 OG Mandarin-2 (5).png" alt="Main Image" class="main-img" />
                        <img src="Nike Air Max 95 OG Mandarin-2 (3).png" alt="Hover Image" class="hover-img" /> 
                    </div>
                    <div class="des">
                        <h5>Nike Air Max 95 OG Mandarin</h5>
                        <h4 class="converted-price" data-gbp="76">£76.00</h4>
                    </div>
                </a>
                <button 
                    class="add-to-cart-btn"
                    data-name="Nike Air Max 95 OG Mandarin"
                    data-price="76"
                    data-image="Nike Air Max 95 OG Mandarin-2 (5).png"
                    data-id="5">
                    <img src="CartIcon.png" alt="Add to cart" class="btn-icon" />
                </button>
            </div>
            
            <div class="pro">
                <a href="product6.html" class="pro-link">
                    <div class="product-img">
                        <img src="Nike X PSG Tech Fleece Zip-Up (3).png" alt="Main Image" class="main-img" />
                        <img src="Nike X PSG Tech Fleece Zip-Up (4).png" alt="Hover Image" class="hover-img" />        
                    </div>
                    <div class="des">
                        <h5>Nike X PSG Tech Fleece</h5>
                        <h4 class="converted-price" data-gbp="30">£30.00</h4>
                    </div>
                </a>
                <button 
                    class="add-to-cart-btn"
                    data-name="Nike X PSG Tech Fleece"
                    data-price="30"
                    data-image="Nike X PSG Tech Fleece Zip-Up (4).png"
                    data-id="6">
                    <img src="CartIcon.png" alt="Add to cart" class="btn-icon" />
                </button>
            </div>
            
            <div class="pro">
                <a href="product7.html" class="pro-link">
                    <div class="product-img">
                        <img src="Nike Sweatpants (3).png" alt="Main Image" class="main-img" />
                        <img src="Nike Sweatpants (4).png" alt="Hover Image" class="hover-img" />
                    </div>
                    <div class="des">
                        <h5>Nike Sweatpants</h5>
                        <h4 class="converted-price" data-gbp="20">£20.00</h4>
                    </div>
                </a>
                <button 
                    class="add-to-cart-btn"
                    data-name="Nike Sweatpants"
                    data-price="20"
                    data-image="Nike Sweatpants (4).png"
                    data-id="7">
                    <img src="CartIcon.png" alt="Add to cart" class="btn-icon" />
                </button>
            </div>

            <div class="pro">
                <a href="product8.html" class="pro-link">
                    <div class="product-img">
                        <img src="Nike Shox TL Orange-Black (5).png" alt="Main Image" class="main-img" />
                        <img src="Nike Shox TL Orange-Black (4).png" alt="Hover Image" class="hover-img" />
                    </div>
                    <div class="des">
                        <h5>Nike Shox TL Orange-Black</h5>
                        <h4 class="converted-price" data-gbp="50">£50.00</h4>
                    </div>
                </a>
                <button 
                    class="add-to-cart-btn"
                    data-name="Nike Shox TL Orange-Black"
                    data-price="50"
                    data-image="Nike Shox TL Orange-Black (5).png"
                    data-id="8">
                    <img src="CartIcon.png" alt="Add to cart" class="btn-icon" />
                </button>
            </div>
            
        </div>
    </section>
        
      <footer class="footer-flex">
        <!-- LEFT SIDE: Currency Selector -->
        <div class="footer-left">
          <div class="custom-select-wrapper">
            <label for="currencySelector" class="currency-label">Currency</label>
            <div class="custom-select" id="customSelect">
              <div class="selected-option" id="selectedOption">GBP (£)</div>
              <span class="arrow" id="dropdownArrow">v</span>
              <ul class="options" id="optionsList">
                <li data-value="GBP">GBP (£)</li>
                <li data-value="USD">USD ($)</li>
                <li data-value="EUR">EUR (€)</li>
              </ul>
            </div>
          </div>
        </div>
        
        <!-- RIGHT SIDE: Copy & Links -->
        <div class="footer-right">
          <p class="footer-copy">© 2025 DEADSTOCKBLVD</p>
          <div class="footer-links">
            <a href="#" class="policy-link" data-modal-target="modal-terms">T&Cs</a>
            <a href="#" class="policy-link" data-modal-target="modal-policy">Privacy Policy</a>
            <a href="#" class="policy-link" data-modal-target="modal-service">Terms of Service</a>
            <a href="#" class="policy-link" data-modal-target="modal-refund">Refund Policy</a>
            <a href="/contact.html" class="policy-link">Contact Information</a>
          </div>
        </div>
      </footer>

        <!-- Mobile Slide-in Cart Drawer -->
        <div id="mobileCartDrawer">
            <div id="mobileCartHeader">
                <h3>Your Cart</h3>
                <button id="closeCartDrawer">&times;</button>
            </div>
            <div id="mobileCartItems"></div>
            <div id="mobileCartFooter">
                <div class="footer-totals">
                    <p>Subtotal: <span id="drawerCartSubtotal">0.00</span></p>
                </div>
                <button id="drawerCheckoutBtn" class="checkout-bar">Checkout</button>
            </div>
        </div>
        <!-- 🔴 New: Backdrop for closing drawer on outside click -->
        <div id="cartBackdrop" class="cart-backdrop"></div>
        
      <!-- ✅ Policy Modal -->
      <div id="modal-policy" class="modal" role="dialog" aria-modal="true" aria-labelledby="policy-title">
        <div class="modal-content">
          <span class="close" role="button" aria-label="Close Modal">&times;</span>
          <h3 id="policy-title">Terms & Conditions</h3>
          <p>Your policy content goes here.</p>
        </div>
      </div>
      
      <!-- ✅ Refund Policy Modal -->
        <div id="modal-refund" class="modal" role="dialog" aria-modal="true" aria-labelledby="refund-title">
            <div class="modal-content">
                <span class="close" role="button" aria-label="Close Modal">&times;</span>
                <h3 id="refund-title">Refund Policy</h3>
                <p>No refunds. All sales are final.</p>
            </div>
        </div>
        
        <!-- ✅ Terms & Conditions Modal -->
        <div id="modal-terms" class="modal" role="dialog" aria-modal="true" aria-labelledby="terms-title">
            <div class="modal-content">
                <span class="close" role="button" aria-label="Close Modal">&times;</span>
                <h3 id="terms-title">Terms & Conditions</h3>
                <p>By using this site, you agree to...</p>
            </div>
        </div>
        
        <!-- ✅ Terms of Service Modal -->
        <div id="modal-service" class="modal" role="dialog" aria-modal="true" aria-labelledby="service-title">
            <div class="modal-content">
                <span class="close" role="button" aria-label="Close Modal">&times;</span>
                <h3 id="service-title">Terms of Service</h3>
                <p>Your Terms of Service content goes here.</p>
            </div>
        </div>
        
        <script>
            window.addEventListener("load", () => {
                const preloader = document.getElementById("preloader");
                if (!preloader) return;
                
                // Short delay to make sure images render properly
                setTimeout(() => {
                    preloader.style.opacity = "0";
                    setTimeout(() => {
                        preloader.style.display = "none";
                    }, 500); // fade out transition
                }, 300); // only wait 300ms after load
            });
        </script>
        
      <script>
        const customSelect = document.getElementById('customSelect');
        const selectedOption = document.getElementById('selectedOption');
        const arrow = document.getElementById('dropdownArrow');
        const optionsList = document.getElementById('optionsList');
        
        let isDropdownOpen = false;
        
        // Toggle dropdown
        customSelect.addEventListener('click', () => {
          isDropdownOpen = !isDropdownOpen;
          optionsList.style.display = isDropdownOpen ? 'block' : 'none';
          arrow.textContent = isDropdownOpen ? '^' : 'v';
        });
        
        // Handle option selection
        optionsList.querySelectorAll('li').forEach(option => {
          option.addEventListener('click', (e) => {
            const value = e.target.dataset.value;
            selectedOption.textContent = e.target.textContent;
            optionsList.style.display = 'none';
            arrow.textContent = 'v';
            isDropdownOpen = false;
            
            // 👉 You can also handle currency switching logic here
            console.log('Currency selected:', value);
          });
        });
        
        // Click outside closes dropdown
        document.addEventListener('click', (e) => {
          if (!customSelect.contains(e.target)) {
            optionsList.style.display = 'none';
            arrow.textContent = 'v';
            isDropdownOpen = false;
          }
        });
      </script>
            
      <script>   //new here//
        const modalTriggers = document.querySelectorAll('[data-modal-target]');
        const modals = document.querySelectorAll('.modal');
        const closeButtons = document.querySelectorAll('.modal .close');
        
        // Open specific modal
        modalTriggers.forEach(trigger => {
          trigger.addEventListener('click', () => {
            const targetId = trigger.getAttribute('data-modal-target');
            const modal = document.getElementById(targetId);
            if (modal) {
              modal.style.display = 'flex';
              document.body.style.overflow = 'hidden'; // ✅ Prevent background scroll
            }
          });
        });
        
        // Close modal when clicking X
        closeButtons.forEach(btn => {
          btn.addEventListener('click', () => {
            const modal = btn.closest('.modal');
            modal.style.display = 'none';
            document.body.style.overflow = ''; // ✅ Re-enable background scroll
          });
        });
        
        // Close when clicking outside modal content
        modals.forEach(modal => {
          modal.addEventListener('click', (e) => {
            if (e.target === modal) {
              modal.style.display = 'none';
              document.body.style.overflow = ''; // ✅ Re-enable background scroll
            }
          });
        });
      </script>
        
      <script>
        const readMoreLinks = document.querySelectorAll('.read-more');
        const overlay = document.getElementById('modalOverlay');
        const closeBtn = document.getElementById('closeBtn');
            
        // Open modal for any .read-more clicked
        readMoreLinks.forEach(link => {
          link.addEventListener('click', () => {
            overlay.style.display = 'flex';
          });
        });
      
        // Close when clicking outside the popup
        overlay.addEventListener('click', (e) => {
          if (e.target === overlay) {
            overlay.style.display = 'none';
          }
        });
            
        // Close when clicking the X
        closeBtn.addEventListener('click', () => {
          overlay.style.display = 'none';
        });
      </script>
      
      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const addToCartBtn = document.getElementById('addToCartBtn');
          const pfAmount = document.getElementById('pfAmount');
          const pfItemName = document.getElementById('pfItemName');
          
          if (addToCartBtn && pfAmount && pfItemName) {
            // Get product price & name from Add to Cart button data attributes
            const price = addToCartBtn.getAttribute('data-price');
            const name = addToCartBtn.getAttribute('data-name');
            
            // Format price to two decimals (e.g., "35.00")
            const formattedPrice = parseFloat(price).toFixed(2);
              
            // Update PayFast form hidden inputs
            pfAmount.value = formattedPrice;
            pfItemName.value = name;
          }
        });
      </script>
        
      <!-- ✅ Add this at the bottom, before </body> -->
      <script type="module">
        import {
          setCurrency,
          getCurrency,
          formatPrice
        } from './currency.js';
        
        document.addEventListener('DOMContentLoaded', async () => {
          const addToCartBtn = document.getElementById("addToCartBtn");
          const basePriceGBP = parseFloat(addToCartBtn?.dataset.price || 0);
          const priceEl = document.getElementById("convertedPrice");
          const selector = document.getElementById("currencySelector");
          
          async function updatePriceDisplay() {
            priceEl.innerHTML = await formatPrice(basePriceGBP);
          }
          
          selector.value = getCurrency();
          selector.addEventListener('change', async (e) => {
            setCurrency(e.target.value);
            await updatePriceDisplay();
          });
          
          await updatePriceDisplay();
        });
      </script>
        
      <script type="module">
        import { formatPrice, getCurrency, setCurrency } from './currency.js';
        
        document.addEventListener('DOMContentLoaded', async () => {
          const priceEls = document.querySelectorAll('.converted-price');
            
          for (let el of priceEls) {
            const gbp = parseFloat(el.dataset.gbp);
            el.innerText = await formatPrice(gbp);
          }
        });
      </script>


    <script type="module" src="cart-utils.js"></script>
    <script type="module" src="shop.js"></script>
    <script type="module" src="product.js"></script>
    <script type="module" src="cart.js"></script> 
    <script type="module" src="search.js"></script>
</body>
</html>





